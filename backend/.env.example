# ============================================================================
# Backend Environment Variables Template
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env files to version control!

# ============================================================================
# Environment Configuration
# ============================================================================
ENVIRONMENT=development
NODE_ENV=development
DEBUG=true

# ============================================================================
# Supabase Configuration
# ============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ============================================================================
# Database Configuration (PostgreSQL + pgvector)
# ============================================================================
DATABASE_URL=postgresql://postgres:password@localhost:5432/adult_matching
DATABASE_POOL_SIZE=20
DATABASE_MAX_CONNECTIONS=100
DATABASE_TIMEOUT=15000

# pgvector specific
PGVECTOR_DIMENSION=768
PGVECTOR_INDEX_TYPE=ivfflat
PGVECTOR_DISTANCE_FUNCTION=cosine

# ============================================================================
# DMM API Configuration
# ============================================================================
DMM_API_ID=your-dmm-api-id
DMM_AFFILIATE_ID=your-affiliate-id
DMM_BASE_URL=https://api.dmm.com/affiliate/v3/
DMM_RATE_LIMIT_PER_SECOND=1
DMM_TIMEOUT_MS=30000

# ============================================================================
# Machine Learning Configuration
# ============================================================================
ML_MODEL_PATH=./backend/ml-pipeline/models/
ML_EMBEDDING_DIMENSION=768
ML_SIMILARITY_THRESHOLD=0.1
ML_DIVERSITY_WEIGHT=0.3
ML_BATCH_SIZE=128
ML_LEARNING_RATE=0.001

# Two-Tower Model
TWO_TOWER_HIDDEN_UNITS=512,256,128
TWO_TOWER_EPOCHS=50
TWO_TOWER_VALIDATION_SPLIT=0.2

# ============================================================================
# Data Processing Configuration
# ============================================================================
# Web Scraping
SCRAPING_REQUEST_DELAY_MS=1000
SCRAPING_MAX_CONCURRENT=5
SCRAPING_RETRY_ATTEMPTS=3
SCRAPING_USER_AGENT="Mozilla/5.0 (compatible; AdultMatchingBot/1.0)"

# Data Validation
MIN_TITLE_LENGTH=10
MAX_TITLE_LENGTH=200
MIN_DESCRIPTION_LENGTH=20
DUPLICATE_THRESHOLD=0.95
MIN_PRICE=0
MAX_PRICE=50000

# ============================================================================
# Caching Configuration
# ============================================================================
CACHE_USER_EMBEDDINGS_TTL=1800
CACHE_RECOMMENDATIONS_TTL=3600
CACHE_SEARCH_RESULTS_TTL=900
REDIS_URL=redis://localhost:6379

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
RATE_LIMIT_AUTHENTICATED=300
RATE_LIMIT_ANONYMOUS=100
RATE_LIMIT_ADMIN=1000
RATE_LIMIT_WINDOW_MS=60000

# ============================================================================
# Security Configuration
# ============================================================================
JWT_SECRET=your-super-secret-jwt-key
JWT_EXPIRY_MINUTES=60
REFRESH_TOKEN_EXPIRY_DAYS=7
PASSWORD_MIN_LENGTH=8
REQUIRE_EMAIL_VERIFICATION=false

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOWED_HEADERS=authorization,x-client-info,apikey,content-type
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS

# ============================================================================
# Monitoring & Logging Configuration
# ============================================================================
LOG_LEVEL=DEBUG
ENABLE_PERFORMANCE_LOGGING=true
ENABLE_ERROR_TRACKING=true
ENABLE_AUDIT_LOGGING=true

# Metrics
ENABLE_PERFORMANCE_METRICS=true
ENABLE_BUSINESS_METRICS=true
METRICS_COLLECTION_INTERVAL_MS=60000

# Alerting
ENABLE_ERROR_ALERTS=true
ENABLE_PERFORMANCE_ALERTS=true
ERROR_THRESHOLD=10
RESPONSE_TIME_THRESHOLD_MS=5000

# ============================================================================
# File Paths & Storage
# ============================================================================
DATA_STORAGE_PATH=./data/
LOG_STORAGE_PATH=./logs/
MODEL_STORAGE_PATH=./backend/ml-pipeline/models/
TEMP_STORAGE_PATH=./tmp/

# File Upload Limits
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=jpg,jpeg,png,webp,mp4

# ============================================================================
# External Services (Optional)
# ============================================================================
# Email Service (for notifications)
EMAIL_SERVICE_URL=
EMAIL_API_KEY=

# Analytics (if using external analytics)
ANALYTICS_API_KEY=
ANALYTICS_ENDPOINT=

# Error Tracking (e.g., Sentry)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# ============================================================================
# Development Tools
# ============================================================================
# Hot Reload
ENABLE_HOT_RELOAD=true
WATCH_FILE_CHANGES=true

# Debug Tools
ENABLE_SQL_LOGGING=true
ENABLE_REQUEST_LOGGING=true
ENABLE_RESPONSE_TIMING=true

# Testing
TEST_DATABASE_URL=postgresql://postgres:password@localhost:5432/adult_matching_test
ENABLE_TEST_MODE=false

# ============================================================================
# Production Overrides (set these in production only)
# ============================================================================
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=INFO
# REQUIRE_EMAIL_VERIFICATION=true
# ENABLE_DATA_ENCRYPTION=true
# DATA_RETENTION_DAYS=365
# CORS_ALLOWED_ORIGINS=https://your-production-domain.com